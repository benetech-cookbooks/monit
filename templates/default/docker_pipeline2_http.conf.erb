check host docker_<%= node.chef_environment %>-pipeline2_http with address localhost
    start   program = "/usr/bin/docker start <%= node.environment %>-pipeline2" with timeout 120 seconds
    stop    program = "/usr/bin/docker stop <%= node.chef_environment %>-pipeline2" with timeout 120 seconds
    if failed host localhost port 8181 protocol HTTP request "/ws/jobs" with timeout 20 seconds for 3 cycles then restart
    if 10 restarts within 10 cycles then unmonitor